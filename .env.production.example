# ===================================================================
# PRODUCTION ENVIRONMENT TEMPLATE FOR RAILWAY DEPLOYMENT
# ===================================================================
# Copy this file and set these environment variables in Railway Dashboard
# Go to: Railway Project → Variables tab → Add these variables

# ===================================================================
# REQUIRED: APPLICATION SETTINGS
# ===================================================================
APP_NAME=document-processing-microservice
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false

# ===================================================================
# REQUIRED: SERVER CONFIGURATION (Railway auto-provides PORT)
# ===================================================================
HOST=0.0.0.0
PORT=$PORT
WORKERS=4
RELOAD=false

# ===================================================================
# REQUIRED: SUPABASE DATABASE CONNECTION
# ===================================================================
# Get these from your Supabase project dashboard
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_KEY=your-service-role-key-here
DATABASE_URL=postgresql://postgres.your-ref:your-password@aws-0-us-east-2.pooler.supabase.com:5432/postgres

# ===================================================================
# REQUIRED: AUTHENTICATION & SECURITY
# ===================================================================
# Generate a secure secret key (use: openssl rand -hex 32)
SECRET_KEY=your-secure-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ===================================================================
# REQUIRED: OPENAI API CONFIGURATION
# ===================================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_BASE_URL=https://api.openai.com

# ===================================================================
# PRODUCTION: CORS SETTINGS (Update with your frontend domains)
# ===================================================================
CORS_ORIGINS=["https://your-frontend-domain.com","https://your-app.railway.app"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# ===================================================================
# PRODUCTION: FILE UPLOAD SETTINGS
# ===================================================================
MAX_UPLOAD_SIZE_MB=50
ALLOWED_FILE_TYPES=["pdf","docx","txt","md"]
TEMP_UPLOAD_DIR=/tmp/document_uploads

# ===================================================================
# PRODUCTION: CHUNKING CONFIGURATION
# ===================================================================
CHUNK_SIZE_MIN=1000
CHUNK_SIZE_MAX=1500
CHUNK_OVERLAP=200
MAX_CHUNKS_PER_DOCUMENT=1000

# ===================================================================
# PRODUCTION: EMBEDDING SETTINGS
# ===================================================================
EMBEDDING_BATCH_SIZE=100
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_DELAY=1
EMBEDDING_DIMENSION=1536

# ===================================================================
# PRODUCTION: RATE LIMITING
# ===================================================================
RATE_LIMIT_REQUESTS_PER_HOUR=5000
RATE_LIMIT_UPLOAD_PER_HOUR=500

# ===================================================================
# PRODUCTION: MONITORING & LOGGING
# ===================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# ===================================================================
# PRODUCTION: SECURITY SETTINGS
# ===================================================================
FILE_SCAN_ENABLED=true
VIRUS_SCAN_ENABLED=false
INPUT_SANITIZATION=true

# ===================================================================
# PRODUCTION: PERFORMANCE OPTIMIZATION
# ===================================================================
JOB_POLLING_INTERVAL=3

# ===================================================================
# RAILWAY DEPLOYMENT INSTRUCTIONS:
# ===================================================================
# 1. Create a new Railway project
# 2. Connect your GitHub repository
# 3. Go to Variables tab in Railway dashboard
# 4. Add each variable above (without the export prefix)
# 5. Replace placeholder values with your actual credentials
# 6. Deploy!
#
# CRITICAL VARIABLES TO SET:
# - DATABASE_URL (your Supabase connection string)
# - OPENAI_API_KEY (your OpenAI API key)
# - SUPABASE_URL (your Supabase project URL)
# - SUPABASE_ANON_KEY (from Supabase API settings)
# - SECRET_KEY (generate secure random string)
# - CORS_ORIGINS (your frontend domains)
# ===================================================================